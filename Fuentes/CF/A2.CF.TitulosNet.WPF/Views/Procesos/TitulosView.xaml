<UserControl
    x:Class="TitulosView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:A2UTILGEN="clr-namespace:A2Utilidades;assembly=A2.Controles.Utilidades.WPF"
    xmlns:A2Utils="clr-namespace:A2ControlMenu;assembly=A2ControlMenu.WPF"
    xmlns:Controles="clr-namespace:A2ComunesControl;assembly=A2.OYD.Control.WPF"
    xmlns:OyD="clr-namespace:A2ComunesControl;assembly=A2.OYD.Control.WPF"
    xmlns:Telerik="http://schemas.telerik.com/2008/xaml/presentation"
    xmlns:my1="clr-namespace:A2ComunesControl;assembly=A2.OYD.Control.WPF"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
    xmlns:src="clr-namespace:A2CFTitulosNet"
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
    MinWidth="350"
    MaxWidth="1350">

    <!--
        Descripción:    Diseño para la pantalla Títulos
        Responsable:    Jorge Peña (Alcuadrado (S.A.)
        Fecha:          5 de Enero 2015
    -->

    <UserControl.Resources>
        <src:DisplayNameConverter x:Key="DisplayConverter" />
        <src:VisibilityConverter x:Key="VisibilityConverter" />
        <src:InVisibilityConverter x:Key="InVisibilityConverter" />
    </UserControl.Resources>

    <Telerik:RadBusyIndicator
        x:Name="myBusyIndicator"
        BusyContent="Cargando..."
        DisplayAfter="0"
        IsBusy="{Binding IsBusy}">

        <Grid x:Name="LayoutRoot">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal">
                <TextBlock Style="{StaticResource Title1}" Text="Cruce de operaciones" />
            </StackPanel>

            <Border Grid.Row="1" Style="{StaticResource Contenedor_Estilo}">
                <StackPanel Orientation="Vertical">
                    <Border Margin="2">
                        <Grid MaxWidth="1350">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="20*" />
                                <ColumnDefinition Width="20*" />
                                <ColumnDefinition Width="130" />
                                <ColumnDefinition Width="20*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="25*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!--  BuscadorCliente  -->
                            <Telerik:DataFormDataField Label="Código" LabelPosition="Above">
                                <Grid Grid.Column="0" MaxWidth="1350">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBox
                                        x:Name="IDComitente"
                                        GotFocus="seleccionarFocoControl"
                                        IsEnabled="{Binding DataContext.HabilitarEncabezado, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        MaxLength="17"
                                        Text="{Binding lngIDComitente, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}"
                                        TextAlignment="Right"
                                        ToolTipService.ToolTip="Digite el código a buscar" />
                                    <my1:BuscadorClienteListaButon
                                        Grid.Column="1"
                                        Margin="2,0,0,0"
                                        Agrupamiento=""
                                        CampoBusqueda="IdComitenteBuscar"
                                        EstadoComitente="T"
                                        TipoVinculacion="C"
                                        finalizoBusqueda="ctrlCliente_comitenteAsignado" />
                                    <Button
                                        x:Name="btnLimpiarCliente"
                                        Grid.Column="2"
                                        Margin="2,0,0,0"
                                        Click="btnLimpiarCliente_Click"
                                        Style="{StaticResource btnLimpiar}"
                                        ToolTipService.ToolTip="Limpiar cliente" />
                                </Grid>
                            </Telerik:DataFormDataField>

                            <!--  BuscadorEspecie  -->
                            <Telerik:DataFormDataField
                                Grid.Column="1"
                                Label="Especie"
                                LabelPosition="Above">
                                <Grid Grid.Column="0" MaxWidth="1350">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!--<StackPanel Orientation="Horizontal">-->
                                    <TextBox
                                        GotFocus="seleccionarFocoControl"
                                        IsEnabled="{Binding DataContext.HabilitarEncabezado, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        MaxLength="15"
                                        Text="{Binding strIdEspecie, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}"
                                        TextAlignment="Left"
                                        ToolTipService.ToolTip="Digite la especie a buscar" />
                                    <my1:BuscadorEspecieListaButon
                                        x:Name="Buscador_Especies"
                                        Grid.Column="1"
                                        Margin="2,0,0,0"
                                        Agrupamiento=""
                                        CampoBusqueda="Nemotecnico"
                                        ClaseOrden="T"
                                        EstadoEspecie="A"
                                        Etiqueta="Nemotécnico"
                                        HabilitarConsultaISIN="False"
                                        finalizoBusqueda="ctrlEspecie_nemotecnicoAsignado" />

                                    <Button
                                        x:Name="btnLimpiarEspecie"
                                        Grid.Column="2"
                                        Margin="2,0,0,0"
                                        Click="btnLimpiarEspecie_Click"
                                        Style="{StaticResource btnLimpiar}"
                                        ToolTipService.ToolTip="Limpiar especie" />
                                    <!--</StackPanel>-->
                                </Grid>
                            </Telerik:DataFormDataField>

                            <Telerik:DataFormDataField
                                Grid.Column="2"
                                Margin="0,0,-25,0"
                                Label="Clase"
                                LabelPosition="Above">
                                <ComboBox
                                    DisplayMemberPath="Descripcion"
                                    ItemsSource="{Binding DiccionarioCombos[CLASETITULO], Source={StaticResource A2VM}}"
                                    SelectedIndex="{Binding DataContext.IndexClase, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                    SelectedValue="{Binding DataContext.strClase, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                    SelectedValuePath="ID"
                                    ToolTipService.ToolTip="Seleccione la clase de título" />
                            </Telerik:DataFormDataField>

                            <Telerik:DataFormDataField
                                Grid.Column="3"
                                Label="Fecha de corte"
                                LabelPosition="Above">
                                <A2UTILGEN:A2DatePicker SelectedDate="{Binding DataContext.dtmFechaCorte, RelativeSource={RelativeSource AncestorType=UserControl}, StringFormat='MMM dd,yyyy', Mode=TwoWay}" ToolTipService.ToolTip="Fecha" />
                            </Telerik:DataFormDataField>

                            <!--  Se cambia la lupa por la palabra buscar YAPP20151214  -->
                            <Telerik:DataFormDataField
                                Grid.Column="4"
                                HorizontalAlignment="Right"
                                Label=""
                                LabelPosition="Above">
                                <Button
                                    x:Name="btnConsultarLiquidaciones"
                                    VerticalAlignment="Bottom"
                                    Click="btnConsultarLiquidaciones_Click"
                                    Content="Buscar" />
                            </Telerik:DataFormDataField>

                            <Telerik:DataFormDataField
                                Grid.Column="5"
                                IsReadOnly="True"
                                Label=""
                                LabelPosition="Above">
                                <TextBox
                                    GotFocus="seleccionarFocoControl"
                                    IsEnabled="{Binding DataContext.HabilitarEncabezado, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                    MaxLength="15"
                                    Text="{Binding strRuta, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}"
                                    TextAlignment="Left"
                                    ToolTipService.ToolTip="" />
                            </Telerik:DataFormDataField>

                            <Telerik:RadBusyIndicator
                                Grid.Column="6"
                                BusyContent="Cargando..."
                                DisplayAfter="0"
                                IsBusy="{Binding IsBusyArchivos}">
                                <Telerik:DataFormDataField
                                    Grid.Column="5"
                                    Label=""
                                    LabelPosition="Above">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Button
                                            x:Name="btnArchivosDeceval"
                                            Grid.Column="0"
                                            Click="btnArchivosDeceval_Click"
                                            Content="Seleccionar archivo"
                                            Visibility="{Binding MostrarSolicitudArchivoDeceval, Converter={StaticResource VisibilityConverter}}" />

                                        <Button
                                            x:Name="btnSolicitarArchivoDeceval"
                                            Grid.Column="1"
                                            Click="btnSolicitarArchivoDeceval_Click"
                                            Content="Solicitar archivos Deceval"
                                            Visibility="{Binding MostrarSolicitudArchivoDeceval, Converter={StaticResource VisibilityConverter}}" />

                                        <my1:ucBtnDialogoImportar
                                            x:Name="ucBtnDialogoImportarArchivo"
                                            Grid.Column="2"
                                            CargarArchivoGenerico="ucBtnDialogoImportar_CargarArchivo"
                                            Filtros="{Binding strExtensionesPermitidas}"
                                            Generico="True"
                                            Proceso="MovimientosDeceval"
                                            SubirArchivo="ucBtnDialogoImportar_SubirArchivo"
                                            Visibility="{Binding MostrarSolicitudArchivoDeceval, Converter={StaticResource InVisibilityConverter}}" />
                                    </Grid>
                                    <!--</StackPanel>-->
                                </Telerik:DataFormDataField>
                            </Telerik:RadBusyIndicator>
                        </Grid>
                    </Border>
                    <Border Margin="0,10,0,0" Style="{StaticResource Contenedor_TabControl}">
                        <TabControl
                            x:Name="ContenedorPrincipal"
                            HorizontalAlignment="Stretch"
                            SelectedIndex="{Binding DataContext.TabSeleccionado, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}">

                            <!--  Títulos Comprados  -->
                            <TabItem
                                x:Name="TabTitulosComprados"
                                HorizontalAlignment="Stretch"
                                Header="Títulos comprados">

                                <StackPanel Orientation="Vertical">

                                    <Grid MaxWidth="1350">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="900" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox
                                            x:Name="txtFiltroCompras"
                                            Grid.Column="0"
                                            Width="100"
                                            Height="14"
                                            Margin="1"
                                            KeyDown="txtFiltroCompra_KeyDown"
                                            KeyUp="txtFiltroCompra_KeyUp"
                                            MaxLength="50"
                                            Text="{Binding strFiltroCompras, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}" />

                                        <Button
                                            x:Name="btnFiltroCompra"
                                            Grid.Column="1"
                                            Margin="2,0,0,0"
                                            Click="btnFiltroCompra_Click"
                                            Content="..."
                                            Style="{StaticResource btnBuscar}"
                                            ToolTipService.ToolTip="Aplicar filtro" />

                                        <Button
                                            x:Name="btnLimpiarFiltroCompra"
                                            Grid.Column="2"
                                            Margin="2,0,0,0"
                                            Click="btnLimpiarFiltroCompra_Click"
                                            Style="{StaticResource btnLimpiar}"
                                            ToolTipService.ToolTip="Limpiar filtro" />

                                        <TextBlock
                                            Grid.Column="3"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource EstiloTextBlock}"
                                            Text="{Binding DataContext.strCantidadRegistrosCompras, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}" />

                                        <Border
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            Style="{StaticResource Contenedor_Paginador}">
                                            <A2UTILGEN:A2DataPager
                                                x:Name="datapagerCompras"
                                                PageSize="10"
                                                Source="{Binding Items, ElementName=dgCompras}" />
                                            <!--<Telerik:RadDataPager
                                                PageSize="10"
                                                Source="{Binding Items, ElementName=dgCompras}"
                                                Visibility="Visible" />-->
                                        </Border>
                                    </Grid>

                                    <A2UTILGEN:A2GridView
                                        x:Name="dgCompras"
                                        Height="150"
                                        VerticalAlignment="Top"
                                        AutoGenerateColumns="False"
                                        FrozenColumnCount="1"
                                        ItemsSource="{Binding DataContext.ListaEncabezadoCompras, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        ValidatesOnDataErrors="None">

                                        <A2UTILGEN:A2GridView.Columns>
                                            <!--  SelectedItem="{Binding DataContext.DiasCalendariosNormaSeleccionado, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"  -->
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strLiq_Parcial}"
                                                Header="Liq - parcial"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strClaseOrden}"
                                                Header="Clase"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipo}"
                                                Header="T. operación"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIDComitente}"
                                                Header="Cliente"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIDCuentaDeceval}"
                                                Header="Nro. cuenta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strFondo_Descripcion}"
                                                Header="Depósito"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strIDEspecie}"
                                                Header="Especie"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmLiquidacion, StringFormat=dd/MM/yyyy}"
                                                Header="F. liquidación"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmCumplimientoTitulo, StringFormat=dd/MM/yyyy}"
                                                Header="F. cumplimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblCantidad, StringFormat=\{0:n2\}}"
                                                Header="Cantidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmEmision, StringFormat=dd/MM/yyyy}"
                                                Header="F. emisión"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmVencimiento, StringFormat=dd/MM/yyyy}"
                                                Header="F. vencimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblTasaDescuento}"
                                                Header="Tasa"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipoTasaFija}"
                                                Header="Tipo tasa"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding strIndicadorEconomico}"
                                                Header="Indicador"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblPuntosIndicador}"
                                                Header="Puntos"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strModalidad}"
                                                Header="Modalidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding curPrecio}"
                                                Header="Precio"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding curTotalLiq, StringFormat=\{0:n2\}}"
                                                Header="Valor total"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding lngPlazo}"
                                                Header="Plazo"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipoDeOferta_Descripcion}"
                                                Header="Tipo oferta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strClase_Descripcion}"
                                                Header="Tipo"
                                                IsReadOnly="True" />
                                        </A2UTILGEN:A2GridView.Columns>

                                    </A2UTILGEN:A2GridView>

                                    <Button
                                        x:Name="btnComprar"
                                        Margin="0,0,5,5"
                                        HorizontalAlignment="Right"
                                        Click="btnComprar_Click"
                                        Content="Cargar"
                                        IsEnabled="{Binding DataContext.HabilitarbtnComprar, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ToolTipService.ToolTip="Custodiar titulos" />

                                </StackPanel>

                            </TabItem>


                            <!--  Títulos Vendidos  -->
                            <TabItem
                                x:Name="TabTitulosVendidos"
                                HorizontalAlignment="Stretch"
                                Header="Títulos vendidos">

                                <StackPanel Orientation="Vertical">

                                    <Grid MaxWidth="1350">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="900" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox
                                            x:Name="txtFiltroVentas"
                                            Grid.Column="0"
                                            Width="100"
                                            Height="14"
                                            Margin="1"
                                            KeyDown="txtFiltroVenta_KeyDown"
                                            KeyUp="txtFiltroVenta_KeyUp"
                                            MaxLength="50"
                                            Text="{Binding strFiltroVentas, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}" />

                                        <Button
                                            x:Name="btnFiltroVenta"
                                            Grid.Column="1"
                                            Margin="2,0,0,0"
                                            Click="btnFiltroVenta_Click"
                                            Content="..."
                                            Style="{StaticResource btnBuscar}"
                                            ToolTipService.ToolTip="Aplicar filtro" />

                                        <Button
                                            x:Name="btnLimpiarFiltroVenta"
                                            Grid.Column="2"
                                            Margin="2,0,0,0"
                                            Click="btnLimpiarFiltroVenta_Click"
                                            Style="{StaticResource btnLimpiar}"
                                            ToolTipService.ToolTip="Limpiar filtro" />

                                        <TextBlock
                                            Grid.Column="3"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource EstiloTextBlock}"
                                            Text="{Binding DataContext.strCantidadRegistrosVentas, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}" />

                                        <Border
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            Style="{StaticResource Contenedor_Paginador}">
                                            <A2UTILGEN:A2DataPager
                                                x:Name="datapagerVentas"
                                                PageSize="10"
                                                Source="{Binding Items, ElementName=dgVentas}" />
                                            <!--<Telerik:RadDataPager
                                                PageSize="10"
                                                Source="{Binding Items, ElementName=dgVentas}"
                                                Visibility="Visible" />-->
                                        </Border>
                                    </Grid>

                                    <A2UTILGEN:A2GridView
                                        x:Name="dgVentas"
                                        Height="150"
                                        VerticalAlignment="Top"
                                        AutoGenerateColumns="False"
                                        FrozenColumnCount="1"
                                        ItemsSource="{Binding DataContext.ListaEncabezadoVentas, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        SelectedItem="{Binding DataContext.DetalleSeleccionado, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ValidatesOnDataErrors="None">
                                        <A2UTILGEN:A2GridView.Columns>
                                            <!--  SelectedItem="{Binding DataContext.DiasCalendariosNormaSeleccionado, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"  -->
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strLiq_Parcial}"
                                                Header="Liq - parcial"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strClaseOrden}"
                                                Header="Clase"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipo}"
                                                Header="T. operación"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIDComitente}"
                                                Header="Cliente"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIDCuentaDeceval}"
                                                Header="Nro. cuenta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strFondo_Descripcion}"
                                                Header="Depósito"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strIDEspecie}"
                                                Header="Especie"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmLiquidacion, StringFormat=dd/MM/yyyy}"
                                                Header="F. liquidación"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmCumplimientoTitulo, StringFormat=dd/MM/yyyy}"
                                                Header="F. cumplimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblCantidad, StringFormat=\{0:n2\}}"
                                                Header="Cantidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmEmision, StringFormat=dd/MM/yyyy}"
                                                Header="F. emisión"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmVencimiento, StringFormat=dd/MM/yyyy}"
                                                Header="F. vencimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblTasaDescuento}"
                                                Header="Tasa"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipoTasaFija}"
                                                Header="Tipo tasa"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding strIndicadorEconomico}"
                                                Header="Indicador"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblPuntosIndicador}"
                                                Header="Puntos"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strModalidad}"
                                                Header="Modalidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding curPrecio}"
                                                Header="Precio"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding curTotalLiq, StringFormat=\{0:n2\}}"
                                                Header="Valor total"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding lngPlazo}"
                                                Header="Plazo"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipoDeOferta_Descripcion}"
                                                Header="Tipo oferta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strClase_Descripcion}"
                                                Header="Tipo"
                                                IsReadOnly="True" />

                                        </A2UTILGEN:A2GridView.Columns>
                                    </A2UTILGEN:A2GridView>

                                    <Button
                                        x:Name="btnDescargar"
                                        Margin="0,0,5,5"
                                        HorizontalAlignment="Right"
                                        Click="btnDescargar_Click"
                                        Content="Descargar"
                                        IsEnabled="{Binding DataContext.HabilitarbtnDescargar, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ToolTipService.ToolTip="Quitar custodias de título" />

                                </StackPanel>

                            </TabItem>


                            <!--  Títulos Cruce  -->
                            <TabItem
                                x:Name="TabTitulosCruce"
                                HorizontalAlignment="Stretch"
                                Header="Cruce">

                                <StackPanel Orientation="Vertical">

                                    <Grid MaxWidth="1350">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox
                                            x:Name="txtFiltroCruce"
                                            Grid.Column="0"
                                            Width="100"
                                            Height="14"
                                            Margin="1"
                                            KeyDown="txtFiltroCruce_KeyDown"
                                            KeyUp="txtFiltroCruce_KeyUp"
                                            MaxLength="50" />

                                        <Button
                                            x:Name="btnFiltroCruce"
                                            Grid.Column="1"
                                            Margin="2,0,0,0"
                                            Click="btnFiltroCruce_Click"
                                            Content="..."
                                            Style="{StaticResource btnBuscar}"
                                            ToolTipService.ToolTip="Aplicar filtro" />

                                        <Button
                                            x:Name="btnLimpiarFiltroCruce"
                                            Grid.Column="2"
                                            Margin="2,0,0,0"
                                            Click="btnLimpiarFiltroCruce_Click"
                                            Style="{StaticResource btnLimpiar}"
                                            ToolTipService.ToolTip="Limpiar filtro" />

                                        <Border
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            Style="{StaticResource Contenedor_Paginador}">
                                            <A2UTILGEN:A2DataPager
                                                x:Name="datapagerCruce"
                                                PageSize="10"
                                                Source="{Binding Items, ElementName=dgCruce}" />
                                        </Border>
                                    </Grid>

                                    <A2UTILGEN:A2GridView
                                        x:Name="dgCruce"
                                        Height="300"
                                        VerticalAlignment="Top"
                                        AutoGenerateColumns="False"
                                        FrozenColumnCount="1"
                                        ItemsSource="{Binding DataContext.ListaEncabezadoPaginadaCruce, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        ValidatesOnDataErrors="None">
                                        <A2UTILGEN:A2GridView.Columns>
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strLiq_Parcial}"
                                                Header="Liq_ParcialVenta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIdRecibo}"
                                                Header="Custodia"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngSecuencia}"
                                                Header="Secuencia"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding lngIDComitente}"
                                                Header="Cliente"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblCantidad, StringFormat=\{0:n2\}}"
                                                Header="Cantidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblCantidadPedida, StringFormat=\{0:n2\}}"
                                                Header="CantidadPedida"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strIDEspecie}"
                                                Header="Especie"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strClase}"
                                                Header="Clase"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipo}"
                                                Header="Tipo"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strTipoDeOferta}"
                                                Header="Tipo Oferta"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmLiquidacion, StringFormat=dd/MM/yyyy}"
                                                Header="F. liquidación"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmCumplimiento, StringFormat=dd/MM/yyyy}"
                                                Header="F. cumplimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmEmision, StringFormat=dd/MM/yyyy}"
                                                Header="F. emisión"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding dtmVencimiento, StringFormat=dd/MM/yyyy}"
                                                Header="F. vencimiento"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblTasa}"
                                                Header="Tasa"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding strIndicadorEconomico}"
                                                Header="Indicador"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblPuntosIndicador}"
                                                Header="Puntos"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strModalidad}"
                                                Header="Modalidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding strObservaciones}"
                                                Header="Observaciones"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                DataMemberBinding="{Binding dblLiq_Cantidad, StringFormat=\{0:n\}}"
                                                Header="Liq_Cantidad"
                                                IsReadOnly="True" />
                                            <Telerik:GridViewDataColumn
                                                DataMemberBinding="{Binding intCruzar}"
                                                Header="Cruzar"
                                                IsReadOnly="True" />

                                        </A2UTILGEN:A2GridView.Columns>
                                    </A2UTILGEN:A2GridView>

                                    <Button
                                        x:Name="btnVolver"
                                        Margin="0,0,5,5"
                                        HorizontalAlignment="Right"
                                        Click="btnVolver_Click"
                                        Content="Volver"
                                        IsEnabled="{Binding DataContext.HabilitarbtnVolver, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        ToolTipService.ToolTip="Volver al tab Títulos comprados" />

                                </StackPanel>

                            </TabItem>

                        </TabControl>
                    </Border>
                    <Border
                        Margin="0,10,0,0"
                        Style="{StaticResource Contenedor_TabControl}"
                        Visibility="{Binding DataContext.VisibilidadContenedorPrincipalPortafolio, RelativeSource={RelativeSource AncestorType=UserControl}}">
                        <TabControl
                            x:Name="ContenedorPrincipalPortafolio"
                            HorizontalAlignment="Stretch"
                            SelectedIndex="{Binding DataContext.TabSeleccionado, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}">

                            <!--  Portafolio  -->
                            <TabItem
                                x:Name="TabPortafolio"
                                HorizontalAlignment="Stretch"
                                Header="Portafolio">
                                <Telerik:RadBusyIndicator
                                    x:Name="myBusyIndicatorPortafolio"
                                    BusyContent="Cargando..."
                                    DisplayAfter="0"
                                    IsBusy="{Binding IsBusyPortafolio}">
                                    <StackPanel Orientation="Vertical">
                                        <A2UTILGEN:A2GridView
                                            x:Name="dgPortafolio"
                                            Height="150"
                                            VerticalAlignment="Top"
                                            AutoGenerateColumns="False"
                                            FrozenColumnCount="2"
                                            ItemsSource="{Binding DataContext.ListaEncabezadoPaginadaPortafolio, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                                            ValidatesOnDataErrors="None">
                                            <A2UTILGEN:A2GridView.Columns>
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding lngIdRecibo}"
                                                    Header="Custodia"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding lngSecuencia}"
                                                    Header="Secuencia"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding lngIDComitente}"
                                                    Header="Cliente"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strNombre}"
                                                    Header="Nombre"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strNroDocumento}"
                                                    Header="Documento"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding lngIdCuentaDeceval}"
                                                    Header="Nro. cuenta"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strDescripcionFondo}"
                                                    Header="Depósito"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                    DataMemberBinding="{Binding dblCantidad, StringFormat=\{0:n2\}}"
                                                    Header="Cantidad"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strIDEspecie}"
                                                    Header="Especie"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strDescripcionEstadoActual}"
                                                    Header="Estado actual"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strLiq_Parcial}"
                                                    Header="Liq - parcial"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding dtmLiquidacion, StringFormat=dd/MM/yyyy}"
                                                    Header="F. liquidación"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strTipoLiquidacion}"
                                                    Header="T. liquidación"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding dtmEmision, StringFormat=dd/MM/yyyy}"
                                                    Header="F. emisión"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding dtmVencimiento, StringFormat=dd/MM/yyyy}"
                                                    Header="F. vencimiento"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                    DataMemberBinding="{Binding dblTasaDescuento}"
                                                    Header="Tasa"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strTipoTasaFija}"
                                                    Header="Tipo tasa"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                    DataMemberBinding="{Binding strIndicadorEconomico}"
                                                    Header="Indicador"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                    DataMemberBinding="{Binding dblPuntosIndicador}"
                                                    Header="Ptos. indicador"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strTipoDeOferta}"
                                                    Header="Tipo oferta"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strClase}"
                                                    Header="Tipo"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    CellStyle="{StaticResource StyleDataGridCellAlignRight}"
                                                    DataMemberBinding="{Binding curTotalLiq, StringFormat=\{0:n2\}}"
                                                    Header="Valor total"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strDescripcionModalidad}"
                                                    Header="Modalidad"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strEstadoActual}"
                                                    Header="Estado"
                                                    IsReadOnly="True" />
                                                <Telerik:GridViewDataColumn
                                                    DataMemberBinding="{Binding strMotivoBloqueo}"
                                                    Header="Motivo"
                                                    IsReadOnly="True" />

                                            </A2UTILGEN:A2GridView.Columns>
                                        </A2UTILGEN:A2GridView>

                                        <Button
                                            x:Name="btnExportarExcel"
                                            Margin="0,0,5,5"
                                            HorizontalAlignment="Right"
                                            Click="btnExportarExcel_Click"
                                            Content="Exportar a excel"
                                            IsEnabled="{Binding DataContext.HabilitarbtnExportarExcel, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Visibility="{Binding DataContext.VisibilidadContenedorPrincipalPortafolio, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                                    </StackPanel>
                                </Telerik:RadBusyIndicator>
                            </TabItem>

                        </TabControl>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Telerik:RadBusyIndicator>
</UserControl>
